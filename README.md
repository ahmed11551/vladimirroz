# Mini App –¥–ª—è —Ä–æ–∑—ã–≥—Ä—ã—à–µ–π –≤ Telegram

Telegram Mini App –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —Ä–æ–∑—ã–≥—Ä—ã—à–µ–π –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Å –æ–ø–ª–∞—Ç–æ–π —á–µ—Ä–µ–∑ –°–±–µ—Ä–±–∞–Ω–∫.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **4 —Ä–∞–∑–¥–µ–ª–∞**: –ê—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç, –û—Ç–∑—ã–≤—ã, –î–æ—Å—Ç–∞–≤–∫–∞, –†–æ–∑—ã–≥—Ä—ã—à–∏
- **–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç** ‚Äî –≤—ã–∏–≥—Ä—ã—à–∏ –∏ –∫—É–ø–ª–µ–Ω–Ω—ã–µ –Ω–æ–º–µ—Ä–∞
- **–†–æ–∑—ã–≥—Ä—ã—à–∏** ‚Äî –≤—ã–±–æ—Ä –Ω–æ–º–µ—Ä–æ–≤, –æ–ø–ª–∞—Ç–∞, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü—ã
- **–û–ø–ª–∞—Ç–∞** ‚Äî –°–±–µ—Ä–±–∞–Ω–∫ (–°–ë–ü/–∫–∞—Ä—Ç–∞). –ù–æ–º–µ—Ä–∞ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã
- **–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π** ‚Äî –º–æ–∂–Ω–æ –∫—É–ø–∏—Ç—å –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–º–µ—Ä–æ–≤
- **–ê–¥–º–∏–Ω/–º–æ–¥–µ—Ä–∞—Ç–æ—Ä** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º, —Ä–æ–∑—ã–≥—Ä—ã—à–∞–º–∏, –æ—Ç–∑—ã–≤–∞–º–∏

## –ó–∞–ø—É—Å–∫

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ó–∞–ø—É—Å–∫ backend –∏ frontend
npm run dev
```

- Frontend: http://localhost:5173
- Backend: http://localhost:3001

## –î–µ–ø–ª–æ–π —Ñ—Ä–æ–Ω—Ç–∞ –Ω–∞ Vercel

1. –ó–∞–ª–µ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ GitHub (–∏–ª–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ Vercel)
2. –í Vercel: **Add New Project** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. **Root Directory**: —É–∫–∞–∂–∏—Ç–µ `frontend`
4. **Environment Variables**: –¥–æ–±–∞–≤—å—Ç–µ `VITE_API_URL` = `https://–≤–∞—à-backend.com/api` (URL –≤–∞—à–µ–≥–æ API)
5. Deploy

–§—Ä–æ–Ω—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É –≤–∏–¥–∞ `https://–≤–∞—à-–ø—Ä–æ–µ–∫—Ç.vercel.app`

## –ú–æ–∫ MVP

–í—Å—Ç—Ä–æ–µ–Ω—ã –º–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ: 15 —Ä–æ–∑—ã–≥—Ä—ã—à–µ–π –ø—Ä–æ–¥—É–∫—Ç–æ–≤, 15 —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–µ, 5 –æ—Ç–∑—ã–≤–æ–≤, –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã. –°–±—Ä–æ—Å –∫ –º–æ–∫–∞–º: `npm run db:reset` + –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ backend.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot (@Rozygvlad_bot)

1. –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ —Ñ—Ä–æ–Ω—Ç –Ω–∞ Vercel (–Ω–∞–ø—Ä–∏–º–µ—Ä `https://vladimirroz.vercel.app`)
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–æ—Ç–∞ (–æ—á–∏—â–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ —Å—Å—ã–ª–∫–∏, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∑–∞–Ω–æ–≤–æ):
```bash
BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω MINI_APP_URL=https://vladimirroz.vercel.app npm run bot:setup
```
3. –û—Ç–∫—Ä–æ–π—Ç–µ [@Rozygvlad_bot](https://t.me/Rozygvlad_bot) ‚Üí –∫–Ω–æ–ø–∫–∞ –º–µ–Ω—é ¬´üéÅ –û—Ç–∫—Ä—ã—Ç—å —Ä–æ–∑—ã–≥—Ä—ã—à–∏¬ª

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –°–±–µ—Ä–±–∞–Ω–∫

–î–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π:

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ [Sber API](https://developers.sber.ru/) –∏–ª–∏ [–ü–ª–∞—Ç—ë–∂–Ω—ã–π —à–ª—é–∑](https://ecomtest.sberbank.ru/doc)
2. –£–∫–∞–∂–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
   - `SBER_MERCHANT_ID` ‚Äî ID –º–µ—Ä—á–∞–Ω—Ç–∞
   - `SBER_API_URL` ‚Äî URL API
   - `BASE_URL` ‚Äî –≤–∞—à –¥–æ–º–µ–Ω –¥–ª—è webhook

3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook `/api/payments/webhook/sber` –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –°–±–µ—Ä–∞

**–î–µ–º–æ-—Ä–µ–∂–∏–º**: –±–µ–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –°–±–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏–º—É–ª—è—Ü–∏—è –æ–ø–ª–∞—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

## –†–æ–ª–∏

- **user** ‚Äî –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- **moderator** ‚Äî –º–æ–¥–µ—Ä–∞—Ü–∏—è –æ—Ç–∑—ã–≤–æ–≤, –ø—Ä–æ—Å–º–æ—Ç—Ä
- **admin** ‚Äî –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π

–ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª—å: `PUT /api/admin/users/:id/role` —Å `{ "role": "admin" }` (—Ç–æ–ª—å–∫–æ –¥–ª—è admin).

**–ü–µ—Ä–≤—ã–π –∞–¥–º–∏–Ω**: –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `backend/data/db.json` ‚Äî –Ω–∞–π–¥–∏—Ç–µ —Å–≤–æ–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞ –≤ Mini App) –∏ –¥–æ–±–∞–≤—å—Ç–µ `"role": "admin"`.

## API

- `GET /api/raffles` ‚Äî —Å–ø–∏—Å–æ–∫ —Ä–æ–∑—ã–≥—Ä—ã—à–µ–π
- `GET /api/raffles/:id` ‚Äî –¥–µ—Ç–∞–ª–∏ + —Å–ª–æ—Ç—ã
- `POST /api/payments/reserve` ‚Äî —Ä–µ–∑–µ—Ä–≤ —Å–ª–æ—Ç–æ–≤, –ø–æ–ª—É—á–∏—Ç—å URL –æ–ø–ª–∞—Ç—ã
- `GET /api/user/wins` ‚Äî –º–æ–∏ –≤—ã–∏–≥—Ä—ã—à–∏
- `GET /api/user/slots` ‚Äî –º–æ–∏ –Ω–æ–º–µ—Ä–∞
- `POST /api/user/reviews` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤
